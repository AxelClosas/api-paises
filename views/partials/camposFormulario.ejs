<%
const obtenerValor = (campo) => {
  if (typeof campo !== null)
  if (typeof pais !== 'undefined' && pais[campo] != null) {
    return Array.isArray(pais[campo]) ? pais[campo].join(', ') : pais[campo]
  }
  return ''
}

const zonasHorarias = [
  { id: 1, zonaH: 'UTC-12:00'},
  { id: 2, zonaH: 'UTC-11:00'},
  { id: 3, zonaH: 'UTC-10:00'},
  { id: 4, zonaH: 'UTC-09:30'},
  { id: 5, zonaH: 'UTC-09:00'},
  { id: 6, zonaH: 'UTC-08:00'},
  { id: 7, zonaH: 'UTC-07:00'},
  { id: 8, zonaH: 'UTC-06:00'},
  { id: 9, zonaH: 'UTC-05:00'},
  { id: 10, zonaH: 'UTC-04:00'},
  { id: 11, zonaH: 'UTC-03:00'},
  { id: 12, zonaH: 'UTC-02:30'},
  { id: 13, zonaH: 'UTC-02:00'},
  { id: 14, zonaH: 'UTC-01:00'},
  { id: 15, zonaH: 'UTC+00:00'},
  { id: 16, zonaH: 'UTC+01:00'},
  { id: 17, zonaH: 'UTC+02:00'},
  { id: 18, zonaH: 'UTC+03:00'},
  { id: 19, zonaH: 'UTC+03:30'},
  { id: 20, zonaH: 'UTC+04:00'},
  { id: 21, zonaH: 'UTC+04:30'},
  { id: 22, zonaH: 'UTC+05:00'},
  { id: 23, zonaH: 'UTC+05:30'},
  { id: 24, zonaH: 'UTC+05:45'},
  { id: 25, zonaH: 'UTC+06:00'},
  { id: 26, zonaH: 'UTC+06:30'},
  { id: 27, zonaH: 'UTC+07:00'},
  { id: 28, zonaH: 'UTC+08:00'},
  { id: 29, zonaH: 'UTC+08:45'},
  { id: 30, zonaH: 'UTC+09:00'},
  { id: 31, zonaH: 'UTC+09:30'},
  { id: 32, zonaH: 'UTC+10:00'},
  { id: 33, zonaH: 'UTC+10:30'},
  { id: 34, zonaH: 'UTC+11:00'},
  { id: 35, zonaH: 'UTC+12:00'},
  { id: 36, zonaH: 'UTC+12:45'},
  { id: 37, zonaH: 'UTC+13:00'},
  { id: 38, zonaH: 'UTC+14:00'},
]

const camposForm = [
    { name: 'nombreOficial', label: 'Nombre oficial del País', type: 'text',     required: true,  placeholder: 'Ej: República Argentina', min: 3, max: 90 }, // nombreOficial
    { name: 'capital',       label: 'Capital',                 type: 'text',     required: true,  placeholder: 'Ej: Buenos Aires', min: 3, max: 90 }, // capital
    { name: 'continente',    label: 'Continente',              type: 'text',     required: true,  placeholder: 'Ej: América', min: 3, max: 90 },// continente
    { name: 'subContinente', label: 'Sub Continente',          type: 'text',     required: true,  placeholder: 'Ej: América del Sur', min: 3, max: 90 },// subContinente
    { name: 'idiomas',       label: 'Idiomas',                 type: 'text',     required: true,  placeholder: 'Ej: Español, Guaraní' },// idiomas
    { name: 'fronteras',     label: 'Fronteras',               type: 'text',     required: false,  placeholder: 'Ej: BOL, BRA, CHL, PRY, URY' },// fronteras
    { name: 'area',          label: 'Área',                    type: 'number',   required: true,  placeholder: 'Ej: 2780400', min: 0 }, // area
    { name: 'mapas',         label: 'Mapas',                   type: 'text',     required: true,  placeholderGoogle: 'Ej: https://goo.gl/maps/cZnCEi5sEMQtKKcB7', placeholderOpenStreetMaps: 'https://www.openstreetmap.org/relation/114686' }, // mapas
    { name: 'poblacion',     label: 'Población',               type: 'number',   required: true,  placeholder: 'Ej: 45376763', min: 0},// poblacion
    { name: 'gini',          label: 'GINI',                    type: 'number',   required: false, placeholderAnio: 'Ej: 2024', placeholderValor: 'Ej: 45.4', min: 0},// poblacion
    { name: 'zonasHorarias', label: 'Zonas Horarias',          type: 'checkbox', required: true,  placeholder: 'Ej: UTC-03:00' },  // zonasHorarias
    { name: 'banderas',      label: 'Banderas',                type: 'text',     required: true,  placeholderPNG: 'Ej: https://flagcdn.com/w320/ar.png', placeholderSVG: 'https://flagcdn.com/ar.svg', alt: 'La bandera de Argentina presenta tres franjas horizontales iguales de color azul claro, blanco y azul claro. Un sol dorado con bordes marrones se centra en la franja blanca.'}, // banderas
    { name: 'creadoPor',     label: 'Creador',                 type: 'text',     required: true,  placeholder: 'Ej: Axel Closas' }, // creadoPor
]
%>


<% camposForm.forEach(campo => { %>
<div>
  <label
    for="<%= campo.name %>"
    <% if (campo.required) { %>
      class="required"
    <% } %>
    ><%= campo.label %></label>
  <% if (campo.name === 'gini') { %>
  <div id="contenedor-gini">
    <div class="item-gini">
      <div>
        <label for="gini[0][anio]">Año</label>
        <input
          type="<%= campo.type %>"
          id="gini[0][anio]"
          name="gini[0][anio]"
          <% if (typeof pais !== 'undefined') { %>
            <% if (typeof obtenerAnioMayorGini(pais.gini) !== 'undefined') { %>
            value="<%= obtenerAnioMayorGini(pais.gini) || '' %>"
            <% } %>
          <% } %>
          placeholder="<%= campo.placeholderAnio %>"
          <% if (campo.required) { %>
          required
          <% } %>
          >
      </div>
      <div>
        <label for="gini[0][valor]">Valor</label>
        <input
          type="<%= campo.type %>"
          step="0.1"
          id="gini[0][valor]"
          name="gini[0][valor]"
          <% if (typeof pais !== 'undefined') { %>
            <% if (typeof obtenerMayorGini(pais.gini) !== 'Sin Dato') { %>
            value="<%= obtenerMayorGini(pais.gini) %>"
            <% } %>
          <% } %>
          placeholder="<%= campo.placeholderValor %>"
          <% if (campo.required) { %>
          required
          <% } %>
          >
      </div>
    </div>
  </div>
  <% } else if (campo.name === 'banderas') { %>
  <div>
    <label for="PNG<%= campo.name %>">PNG</label>
    <input
      type="text"
      id="PNG<%= campo.name %>"
      name="banderas[png]"
      <% if (typeof pais !== 'undefined') { %>
        value="<%= pais.banderas.get('png') || '' %>"
      <% } %>
      placeholder="<%= campo.placeholderPNG %>"
    >
  </div>
  <div>
    <label for="SVG<%= campo.name %>">SVG</label>
    <input
      type="text"
      id="SVG<%= campo.name %>"
      name="banderas[svg]"
      <% if (typeof pais !== 'undefined') { %>
        value="<%= pais.banderas.get('svg') || '' %>"
      <% } %>
      placeholder="<%= campo.placeholderSVG %>"
    >
  </div>
  <div>
    <label for="altMapa<%= campo.name %>">Alt</label>
    <input
      type="text"
      id="altMapa<%= campo.name %>"
      name="banderas[alt]"
      <% if (typeof pais !== 'undefined') { %>
        value="<%= pais.banderas.get('alt') || '' %>"
      <% } %>
      placeholder="<%= campo.alt %>"
    >
  </div>
  <% } else if (campo.name === 'mapas') { %>
    <div>
      <div>
        <label for="google<%= campo.name %>">Google Maps</label>
        <input
          type="text"
          id="google<%= campo.name %>"
          name="mapas[googleMaps]"
          <% if (typeof pais !== 'undefined') { %>
            value="<%= pais.mapas.googleMaps || ''%>"
          <% } %>
          placeholder="<%= campo.placeholderGoogle %>"
        >
      </div>
      <div>
        <label for="openStreetMaps<%= campo.name %>">Open Street Maps</label>
        <input
        type="text"
        id="openStreetMaps<%= campo.name %>"
        name="mapas[openStreetMaps]"
        <% if (typeof pais !== 'undefined') { %>
        value="<%= pais.mapas.openStreetMaps || '' %>"
        <% } %>
        placeholder="<%= campo.placeholderOpenStreetMaps %>"
        >
      </div>
    </div>
  <% } else if (campo.name === 'zonasHorarias') { %>
    <div class="contenedor-zonasHorarias">
    <% zonasHorarias.forEach(zona => { %>
      <input
      id="zona<%= zona.id %>"
      name="zonasHorarias[]"
      type="<%= campo.type %>"
      value="<%= zona.zonaH %>"
      <% if (typeof pais !== 'undefined') { %>
        <% pais.zonasHorarias.forEach( zonaP => { %>
          <% if (zonaP === zona.zonaH) { %>
          checked
          <% } %>
        <% }) %>
      <% } %>
      >
      <label for="zona<%= zona.id %>"><%= zona.zonaH %></label>
      <% }) %>
    </div>
  <% } else { %>
  <input
      id="<%= campo.name %>"
      name="<%= campo.name %>"
      type="<%= campo.type %>"
      placeholder="<%= campo.placeholder %>"
      value="<%= obtenerValor(campo.name) || '' %>"
      <% if (campo.required) { %>
      required
      <% } %>
      <% if (campo.type === 'text' && campo.min !== null) { %> minlength="<%= campo.min %>" <% } %>
      <% if (campo.type === 'text' && campo.max !== null) { %> maxlength="<%= campo.max %>" <% } %>
      <% if (campo.type === 'number' && campo.min !== null) { %> min="<%= campo.min %>" <% } %>
      <% if (campo.type === 'number' && campo.max !== null) { %> max="<%= campo.max %>" <% } %>
  >
  <% } %>
</div>
<% }) %>