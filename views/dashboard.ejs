<main>
  <% if (error.status === 404) { %>
  <p><%= error.mensaje %></p>
  <p>Para cargar los países la Base de Datos haz click en el siguiente botón</p>
  <form action="/api/paises/cargarPaises" method="POST">
    <button type="submit">
      Cargar países
    </button>
  </form>
  <% } else { %>
  <p>Para limpiar todos los países de la Base de Datos haz click en el siguiente botón</p>
  <form action="/api/paises/eliminarPaises?_method=DELETE" method="POST">
    <button type="submit">
      Eliminar países
    </button>
  </form>
  <table border="1">
    <thead>
      <th>Bandera</th>
      <th>Nombre oficial</th>
      <th>Capital</th>
      <th>Continente</th>
      <th>Sub continente</th>
      <th>Idiomas</th>
      <th>Fronteras</th>
      <th>Área</th>
      <th>Mapas</th>
      <th>Población</th>
      <th>gini</th>
      <th>Zonas horarias</th>
      <th>Creado por</th>
    </thead>
    <tbody>
      <% paises.forEach(pais => { %>
        <tr>
          <td><img src="<%= pais.banderas.get('svg') || pais.banderas.get('png') %>" alt="<%= pais.banderas.get('alt') || ''%>" width="50px"></td>
          <td><%= pais.nombreOficial %></td>
          <td><%= pais.capital %></td>
          <td><%= pais.continente %></td>
          <td><%= pais.subContinente %></td>
          <td>
            <% pais.idiomas.forEach((valor, clave) => {%>
              <span><%= valor %></span>
              <% }) %>
          </td>
          <td>
            <ul>
              <% pais.fronteras.forEach(frontera => { %>
              <li><%= frontera %></li>
              <% }) %>
            </ul>
          </td>
          <td><%= pais.area.toLocaleString() %></td>
          <td>
            <a href="<%= pais.mapas['googleMaps'] %>" target="_blank">Google Maps</a>
            <a href="<%= pais.mapas['openStreetMaps'] %>" target="_blank">Open Street Map</a>
          </td>
          <td><%= pais.poblacion.toLocaleString() %></td>
          <td><%= obtenerMayorGini(pais.gini) %></td>
          <td>
            <ul>
              <% pais.zonasHorarias.forEach(zona => { %>
              <li><%= zona %></li>
              <% }) %>
            </ul>
          </td>
          <td><%= pais.creadoPor %></td>
        </tr>
      <% }) %>
    </tbody>
    <tfoot>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td>Total de Área: <%= totalArea.toLocaleString() %></td>
      <td></td>
      <td>Total de Población: <%= totalPoblacion.toLocaleString() %></td>
      <td>Promedio Gini: <%= promedioGiniPaises.toFixed(2) %></td>
    </tfoot>
  </table>
  <% } %>
</main>